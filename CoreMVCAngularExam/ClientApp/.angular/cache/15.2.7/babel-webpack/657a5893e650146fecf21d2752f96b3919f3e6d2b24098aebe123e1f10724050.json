{"ast":null,"code":"import { __decorate, __param } from \"tslib\";\nimport { Component, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { Validators } from '@angular/forms';\nlet EditContactDialogComponent = class EditContactDialogComponent {\n  constructor(dialogRef, formBuilder, data, phoneNumberDataService, categoryDataService) {\n    this.dialogRef = dialogRef;\n    this.formBuilder = formBuilder;\n    this.data = data;\n    this.phoneNumberDataService = phoneNumberDataService;\n    this.categoryDataService = categoryDataService;\n    this.isContactIdDisabled = true;\n  }\n  ngOnInit() {\n    this.initializeForm();\n    this.getPhoneNumbers();\n    this.getCategories();\n  }\n  getPhoneNumbers() {\n    this.phoneNumberDataService.getPhoneNumbers().subscribe(data => {\n      this.phoneNumbers = data;\n    });\n  }\n  getCategories() {\n    this.categoryDataService.getCategories().subscribe(data => {\n      this.categories = data;\n    });\n  }\n  initializeForm() {\n    this.contactForm = this.formBuilder.group({\n      contactId: [{\n        value: '',\n        disabled: this.isContactIdDisabled\n      }, Validators.required],\n      firstName: [this.data.contact?.firstName || ''],\n      lastName: [this.data.contact?.lastName || ''],\n      categoryId: [this.data.contact?.categoryId || ''],\n      phoneId: [this.data.contact?.phoneId || '']\n    });\n    console.log(\"console.log:contactForm\", this.contactForm);\n    // Убедимся, что данные переданы и установим значения формы\n    this.editedContact = this.data.editedContact;\n    console.log(\"console.log:editedContact\", this.editedContact);\n    if (this.editedContact) {\n      this.contactForm.patchValue(this.editedContact);\n    }\n  }\n  onSubmit() {\n    if (this.contactForm.valid) {\n      this.dialogRef.close(this.contactForm.value);\n    }\n  }\n  onCancel() {\n    this.dialogRef.close();\n  }\n};\nEditContactDialogComponent = __decorate([Component({\n  selector: 'app-edit-contact-dialog',\n  templateUrl: './edit-contact-dialog.component.html',\n  styleUrls: ['./edit-contact-dialog.component.css']\n}), __param(2, Inject(MAT_DIALOG_DATA))], EditContactDialogComponent);\nexport { EditContactDialogComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,eAAe;AACjD,SAAuBC,eAAe,QAAQ,0BAA0B;AACxE,SAAiCC,UAAU,QAAQ,gBAAgB;AAU5D,IAAMC,0BAA0B,GAAhC,MAAMA,0BAA0B;EAQrCC,YACUC,SAAmD,EACnDC,WAAwB,EACAC,IAA8C,EACtEC,sBAA8C,EAC9CC,mBAAwC;IAJxC,cAAS,GAATJ,SAAS;IACT,gBAAW,GAAXC,WAAW;IACa,SAAI,GAAJC,IAAI;IAC5B,2BAAsB,GAAtBC,sBAAsB;IACtB,wBAAmB,GAAnBC,mBAAmB;IAPtB,wBAAmB,GAAG,IAAI;EAQ7B;EAEJC,QAAQ;IACN,IAAI,CAACC,cAAc,EAAE;IACrB,IAAI,CAACC,eAAe,EAAE;IACtB,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAD,eAAe;IACb,IAAI,CAACJ,sBAAsB,CAACI,eAAe,EAAE,CAACE,SAAS,CAAEP,IAAuB,IAAI;MAClF,IAAI,CAACQ,YAAY,GAAGR,IAAI;IAC1B,CAAC,CAAC;EACJ;EAEAM,aAAa;IACX,IAAI,CAACJ,mBAAmB,CAACI,aAAa,EAAE,CAACC,SAAS,CAACP,IAAI,IAAG;MACxD,IAAI,CAACS,UAAU,GAAGT,IAAI;IACxB,CAAC,CAAC;EACJ;EAEAI,cAAc;IACZ,IAAI,CAACM,WAAW,GAAG,IAAI,CAACX,WAAW,CAACY,KAAK,CAAC;MACxCC,SAAS,EAAE,CAAC;QAAEC,KAAK,EAAE,EAAE;QAAEC,QAAQ,EAAE,IAAI,CAACC;MAAmB,CAAE,EAAEpB,UAAU,CAACqB,QAAQ,CAAC;MACnFC,SAAS,EAAE,CAAC,IAAI,CAACjB,IAAI,CAACkB,OAAO,EAAED,SAAS,IAAI,EAAE,CAAC;MAC/CE,QAAQ,EAAE,CAAC,IAAI,CAACnB,IAAI,CAACkB,OAAO,EAAEC,QAAQ,IAAI,EAAE,CAAC;MAC7CC,UAAU,EAAE,CAAC,IAAI,CAACpB,IAAI,CAACkB,OAAO,EAAEE,UAAU,IAAI,EAAE,CAAC;MACjDC,OAAO,EAAE,CAAC,IAAI,CAACrB,IAAI,CAACkB,OAAO,EAAEG,OAAO,IAAI,EAAE;KAC3C,CAAC;IAIFC,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAACb,WAAW,CAAC;IACxD;IACD,IAAI,CAACc,aAAa,GAAG,IAAI,CAACxB,IAAI,CAACwB,aAAa;IAC3CF,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAC,IAAI,CAACC,aAAa,CAAC;IAC3D,IAAI,IAAI,CAACA,aAAa,EAAE;MACtB,IAAI,CAACd,WAAW,CAACe,UAAU,CAAC,IAAI,CAACD,aAAa,CAAC;;EAEnD;EAEAE,QAAQ;IACN,IAAI,IAAI,CAAChB,WAAW,CAACiB,KAAK,EAAE;MAC1B,IAAI,CAAC7B,SAAS,CAAC8B,KAAK,CAAC,IAAI,CAAClB,WAAW,CAACG,KAAK,CAAC;;EAEhD;EAEAgB,QAAQ;IACN,IAAI,CAAC/B,SAAS,CAAC8B,KAAK,EAAE;EACxB;CACD;AA/DYhC,0BAA0B,eALtCJ,SAAS,CAAC;EACTsC,QAAQ,EAAE,yBAAyB;EACnCC,WAAW,EAAE,sCAAsC;EACnDC,SAAS,EAAE,CAAC,qCAAqC;CAClD,CAAC,EAYGC,iBAAM,CAACvC,eAAe,CAAC,IAXfE,0BAA0B,CA+DtC;SA/DYA,0BAA0B","names":["Component","Inject","MAT_DIALOG_DATA","Validators","EditContactDialogComponent","constructor","dialogRef","formBuilder","data","phoneNumberDataService","categoryDataService","ngOnInit","initializeForm","getPhoneNumbers","getCategories","subscribe","phoneNumbers","categories","contactForm","group","contactId","value","disabled","isContactIdDisabled","required","firstName","contact","lastName","categoryId","phoneId","console","log","editedContact","patchValue","onSubmit","valid","close","onCancel","selector","templateUrl","styleUrls","__param"],"sourceRoot":"","sources":["F:\\STEP\\My_Project\\Angular\\CoreMvcAngularExam\\CoreMVCAngularExam\\ClientApp\\src\\app\\edit-contact-dialog\\edit-contact-dialog.component.ts"],"sourcesContent":["import { Component, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Contact } from '../contacts/contactdata.service';\nimport { PhoneNumberDataService } from '../phoneNumbers/phoneNumbersdata.service';\r\nimport { CategoryDataService } from '../categories/categorydata.service';\n\n@Component({\n  selector: 'app-edit-contact-dialog',\n  templateUrl: './edit-contact-dialog.component.html',\n  styleUrls: ['./edit-contact-dialog.component.css']\n})\nexport class EditContactDialogComponent {\n  public contactForm!: FormGroup;\n  public editedContact: Contact | undefined;\n  contact: any;\r\n  phoneNumbers: any[] | undefined; // Замените any на реальный тип данных\r\n  categories: any[] | undefined; // Замените any на реальный тип данных\r\n  public isContactIdDisabled = true;\r\n\n  constructor(\r\n    private dialogRef: MatDialogRef<EditContactDialogComponent>,\r\n    private formBuilder: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { contact: any; editedContact: Contact },\r\n    private phoneNumberDataService: PhoneNumberDataService,\r\n    private categoryDataService: CategoryDataService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initializeForm();\r\n    this.getPhoneNumbers();\r\n    this.getCategories();\r\n  }\n\n  getPhoneNumbers(): void {\r\n    this.phoneNumberDataService.getPhoneNumbers().subscribe((data: any[] | undefined) => {\r\n      this.phoneNumbers = data;\r\n    });\r\n  }\r\n\r\n  getCategories(): void {\r\n    this.categoryDataService.getCategories().subscribe(data => {\r\n      this.categories = data;\r\n    });\r\n  }\r\n\r\n  initializeForm(): void {\r\n    this.contactForm = this.formBuilder.group({\r\n      contactId: [{ value: '', disabled: this.isContactIdDisabled }, Validators.required],\r\n      firstName: [this.data.contact?.firstName || ''],\r\n      lastName: [this.data.contact?.lastName || ''],\r\n      categoryId: [this.data.contact?.categoryId || ''],\r\n      phoneId: [this.data.contact?.phoneId || ''],\r\n    });\n  \n    \n\n    console.log(\"console.log:contactForm\", this.contactForm);\n    // Убедимся, что данные переданы и установим значения формы\n   this.editedContact = this.data.editedContact;\n    console.log(\"console.log:editedContact\",this.editedContact);\n    if (this.editedContact) {\n      this.contactForm.patchValue(this.editedContact);\n    }\n  }\n\n  onSubmit() {\n    if (this.contactForm.valid) {\n      this.dialogRef.close(this.contactForm.value);\n    }\n  }\n\n  onCancel() {\n    this.dialogRef.close();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}