{"ast":null,"code":"import { HttpErrorResponse } from '@angular/common/http';\nimport { AddPhoneNumberDialogComponent } from '../add-phone-number-dialog/add-phone-number-dialog.component';\nimport { EditPhoneNumberDialogComponent } from '../edit-phone-number-dialog/edit-phone-number-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./phoneNumbersdata.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nfunction PhoneNumbersComponent_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"em\");\n    i0.ɵɵtext(2, \"Please, choose action.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction PhoneNumbersComponent_table_6_tr_8_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function PhoneNumbersComponent_table_6_tr_8_button_8_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const phoneNumber_r3 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deletePhoneNumber(phoneNumber_r3.phoneId));\n    });\n    i0.ɵɵtext(1, \"Delete\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PhoneNumbersComponent_table_6_tr_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"button\", 2);\n    i0.ɵɵlistener(\"click\", function PhoneNumbersComponent_table_6_tr_8_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const phoneNumber_r3 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.updatePhoneNumber(phoneNumber_r3.phoneId, phoneNumber_r3.numberPhone));\n    });\n    i0.ɵɵtext(7, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, PhoneNumbersComponent_table_6_tr_8_button_8_Template, 2, 0, \"button\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const phoneNumber_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(phoneNumber_r3.phoneId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(phoneNumber_r3.numberPhone);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", phoneNumber_r3.phoneId !== undefined);\n  }\n}\nfunction PhoneNumbersComponent_table_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 4)(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Phone Number\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"tbody\");\n    i0.ɵɵtemplate(8, PhoneNumbersComponent_table_6_tr_8_Template, 9, 3, \"tr\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.phoneNumbers);\n  }\n}\nexport class PhoneNumbersComponent {\n  constructor(phoneNumberDataSrv, dialog) {\n    this.phoneNumberDataSrv = phoneNumberDataSrv;\n    this.dialog = dialog;\n  }\n  ngOnInit() {\n    this.phoneNumbers = this.phoneNumberDataSrv.phoneNumbers;\n    this.showAll();\n  }\n  showAll() {\n    this.phoneNumberDataSrv.showAll();\n  }\n  addPhoneNumber() {\n    // Открываем диалоговое окно для добавления контакта\n    const dialogRef = this.dialog.open(AddPhoneNumberDialogComponent, {\n      width: '400px'\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        console.log('Данные из диалога:', result);\n        this.phoneNumberDataSrv.addPhoneNumber(result);\n        // Дополнительные действия\n      } else {\n        console.log('Диалог закрыт без данных');\n      }\n    });\n  }\n  updatePhoneNumber(phoneId, numberPhone) {\n    if (phoneId === undefined || !numberPhone) {\n      // Отобразить сообщение об ошибке пользователю, что categoryId не определен\n      return;\n    }\n    const dialogRef = this.dialog.open(EditPhoneNumberDialogComponent, {\n      data: {\n        phoneId,\n        numberPhone\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result && result.phoneId && result.numberPhone) {\n        this.phoneNumberDataSrv.updatePhoneNumber(result.phoneId, result.numberPhone).subscribe(response => {\n          this.showAll();\n        }, error => {\n          if (error instanceof HttpErrorResponse) {\n            if (error.error.errors && error.error.errors.numberPhone) {\n              // Отобразить сообщение об ошибке пользователю\n              // Например, используя Angular Material Snackbar\n              this.snackBar.open('Validation error: ' + error.error.errors.numberPhone[0], 'Close', {\n                duration: 5000\n              });\n            }\n          }\n        });\n      }\n    });\n  }\n  deletePhoneNumber(phoneId) {\n    this.phoneNumberDataSrv.deletePhoneNumber(phoneId);\n  }\n}\nPhoneNumbersComponent.ɵfac = function PhoneNumbersComponent_Factory(t) {\n  return new (t || PhoneNumbersComponent)(i0.ɵɵdirectiveInject(i1.PhoneNumberDataService), i0.ɵɵdirectiveInject(i2.MatDialog));\n};\nPhoneNumbersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PhoneNumbersComponent,\n  selectors: [[\"phoneNumbers\"]],\n  decls: 7,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [1, \"example-button-row\"], [\"mat-button\", \"\", 1, \"btn\", \"btn-accent\", 3, \"click\"], [\"class\", \"table table-striped\", 4, \"ngIf\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", \"class\", \"btn Warn\", 3, \"click\", 4, \"ngIf\"], [\"mat-button\", \"\", 1, \"btn\", \"Warn\", 3, \"click\"]],\n  template: function PhoneNumbersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"Phone Numbers\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, PhoneNumbersComponent_p_2_Template, 3, 0, \"p\", 0);\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function PhoneNumbersComponent_Template_button_click_4_listener() {\n        return ctx.addPhoneNumber();\n      });\n      i0.ɵɵtext(5, \"Add Phone\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(6, PhoneNumbersComponent_table_6_Template, 9, 1, \"table\", 3);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.phoneNumbers);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.phoneNumbers);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["HttpErrorResponse","AddPhoneNumberDialogComponent","EditPhoneNumberDialogComponent","i0","PhoneNumbersComponent","constructor","phoneNumberDataSrv","dialog","ngOnInit","phoneNumbers","showAll","addPhoneNumber","dialogRef","open","width","afterClosed","subscribe","result","console","log","updatePhoneNumber","phoneId","numberPhone","undefined","data","response","error","errors","snackBar","duration","deletePhoneNumber","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["F:\\STEP\\My_Project\\Angular\\CoreMvcAngularExam\\CoreMVCAngularExam\\ClientApp\\src\\app\\phoneNumbers\\phoneNumbers.component.ts","F:\\STEP\\My_Project\\Angular\\CoreMvcAngularExam\\CoreMVCAngularExam\\ClientApp\\src\\app\\phoneNumbers\\phoneNumbers.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { PhoneNumberDataService, PhoneNumber } from './phoneNumbersdata.service';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatDialog } from '@angular/material/dialog';\r\n\r\nimport { AddPhoneNumberDialogComponent } from '../add-phone-number-dialog/add-phone-number-dialog.component';\r\nimport { EditPhoneNumberDialogComponent } from '../edit-phone-number-dialog/edit-phone-number-dialog.component';\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'phoneNumbers',\r\n  templateUrl: './phoneNumbers.component.html',\r\n  styleUrls: ['./phoneNumbers.component.css']\r\n})\r\nexport class PhoneNumbersComponent implements OnInit {\r\n  public phoneNumbers: PhoneNumber[] | undefined;\r\n  snackBar: any;\r\n  http: any;\r\n\r\n  constructor(private phoneNumberDataSrv: PhoneNumberDataService, private dialog: MatDialog) {\r\n    }\r\n    \r\n  ngOnInit() {\r\n    this.phoneNumbers = this.phoneNumberDataSrv.phoneNumbers;\r\n    this.showAll();\r\n    }\r\n    \r\n    showAll() {\r\n      this.phoneNumberDataSrv.showAll();\r\n    }\r\n\r\n  addPhoneNumber() {\r\n    // Открываем диалоговое окно для добавления контакта\r\n    const dialogRef = this.dialog.open(AddPhoneNumberDialogComponent, {\r\n      width: '400px',\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result) {\r\n        console.log('Данные из диалога:', result);\r\n        this.phoneNumberDataSrv.addPhoneNumber(result);\r\n        // Дополнительные действия\r\n      } else {\r\n        console.log('Диалог закрыт без данных');\r\n      }\r\n    });\r\n  }\r\n  \r\n  updatePhoneNumber(phoneId: number | undefined, numberPhone: string | undefined): void {\r\n    if (phoneId === undefined || !numberPhone) {\r\n      // Отобразить сообщение об ошибке пользователю, что categoryId не определен\r\n      return;\r\n    }\r\n\r\n    const dialogRef = this.dialog.open(EditPhoneNumberDialogComponent, {\r\n      data: { phoneId, numberPhone }\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe(result => {\r\n      if (result && result.phoneId && result.numberPhone) {\r\n        this.phoneNumberDataSrv.updatePhoneNumber(result.phoneId, result.numberPhone)\r\n          .subscribe(\r\n            response => {\r\n              this.showAll();\r\n            },\r\n            error => {\r\n\r\n              if (error instanceof HttpErrorResponse) {\r\n\r\n                if (error.error.errors && error.error.errors.numberPhone) {\r\n\r\n                  // Отобразить сообщение об ошибке пользователю\r\n                  // Например, используя Angular Material Snackbar\r\n                  this.snackBar.open('Validation error: ' + error.error.errors.numberPhone[0], 'Close', {\r\n                    duration: 5000,\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          );\r\n      }\r\n    });\r\n  }\r\n\r\n  deletePhoneNumber(phoneId: number): void  {\r\n    this.phoneNumberDataSrv.deletePhoneNumber(phoneId);\r\n  }\r\n}\r\n","<h1>Phone Numbers</h1>\r\n\r\n\r\n\r\n\r\n<p *ngIf=\"!phoneNumbers\"><em>Please, choose action.</em></p>\r\n<div class=\"example-button-row\">\r\n  <button mat-button (click)=\"addPhoneNumber()\" class=\"btn btn-accent\">Add Phone</button>\r\n</div>\r\n<table class='table table-striped' *ngIf=\"phoneNumbers\">\r\n  <thead>\r\n    <tr>\r\n      <th>Id</th>\r\n      <th>Phone Number</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let phoneNumber of phoneNumbers\">\r\n      <td>{{ phoneNumber.phoneId }}</td>\r\n      <td>{{ phoneNumber.numberPhone }}</td>\r\n      <td>\r\n        <button mat-button\r\n                (click)=\"updatePhoneNumber(phoneNumber.phoneId, phoneNumber.numberPhone)\"\r\n                class=\"btn btn-accent\">Edit</button>\r\n\r\n        <button mat-button *ngIf=\"phoneNumber.phoneId !== undefined\"\r\n                (click)=\"deletePhoneNumber(phoneNumber.phoneId)\" class=\"btn Warn\">Delete</button>\r\n      </td>\r\n    </tr>\r\n\r\n  </tbody>\r\n</table>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}