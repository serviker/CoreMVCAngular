{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class Contact {}\nexport class ContactDataService {\n  constructor(http, baseUrl) {\n    this.http = http;\n    this.contacts = [];\n    this.http = http;\n    this.baseUrl = baseUrl;\n  }\n  getContactsWithDetails() {\n    // Ваш запрос на сервер, который возвращает контакты с дополнительными данными\n    return this.http.get(`https://localhost:7217/api/Contacts/contacts-with-details`);\n  }\n  showAll() {\n    this.http.get(`https://localhost:7217/api/Contacts`).subscribe(result => {\n      // this.contacts = result;\n      this.contacts.length = 0;\n      this.contacts.push(...result);\n      console.log(result);\n    }, error => console.error(error));\n  }\n  addContact() {\n    const body = {\n      //contact_id: 12,\n      firstName: \"Fedor\",\n      lastName: \"Fedorov\",\n      categoryId: 3,\n      phoneId: 17\n    };\n    this.http.post(`https://localhost:7217/api/Contacts`, body).subscribe(result => {\n      this.showAll();\n    }, error => console.error(error));\n  }\n  updateContact() {\n    const body = {\n      //contact_id: 12,\n      firstName: \"Fedor\",\n      lastName: \"Fedorov\",\n      category_id: 3,\n      phone_id: 17\n    };\n    this.http.put(`https://localhost:7217/api/Contacts/12`, body).subscribe(result => {\n      this.showAll();\n    }, error => console.error(error));\n  }\n  deleteContact(contactId) {\n    this.http.delete(`https://localhost:7217/api/Contacts/${contactId}`).subscribe(result => {\n      this.showAll();\n    }, error => console.error(error));\n  }\n}\nContactDataService.ɵfac = function ContactDataService_Factory(t) {\n  return new (t || ContactDataService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject('BASE_URL'));\n};\nContactDataService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ContactDataService,\n  factory: ContactDataService.ɵfac\n});","map":{"version":3,"mappings":";;AAIA,OAAM,MAAOA,OAAO;AASpB,OAAM,MAAOC,kBAAkB;EAK3BC,YAAoBC,IAAgB,EAAsBC,OAAe;IAArD,SAAI,GAAJD,IAAI;IAHnB,aAAQ,GAAc,EAAE;IAIzB,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC5B;EAEAC,sBAAsB;IACpB;IACA,OAAO,IAAI,CAACF,IAAI,CAACG,GAAG,CAAY,2DAA2D,CAAC;EAC9F;EAEEC,OAAO;IACL,IAAI,CAACJ,IAAI,CAACG,GAAG,CAAY,qCAAqC,CAAC,CAACE,SAAS,CAACC,MAAM,IAAG;MAClF;MACC,IAAI,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC;MACxB,IAAI,CAACD,QAAQ,CAACE,IAAI,CAAC,GAAGH,MAAmB,CAAC;MAC1CI,OAAO,CAACC,GAAG,CAACL,MAAM,CAAC;IACrB,CAAC,EAAEM,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAAC;EACnC;EAEFC,UAAU;IAER,MAAMC,IAAI,GAAG;MACX;MACAC,SAAS,EAAE,OAAO;MAClBC,QAAQ,EAAE,SAAS;MACnBC,UAAU,EAAE,CAAC;MACbC,OAAO,EAAE;KAEV;IAED,IAAI,CAAClB,IAAI,CAACmB,IAAI,CAAC,qCAAqC,EAAEL,IAAI,CAAC,CAACT,SAAS,CAACC,MAAM,IAAG;MACvE,IAAI,CAACF,OAAO,EAAE;IAClB,CAAC,EAAEQ,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAAC;EACrC;EAEFQ,aAAa;IAEP,MAAMN,IAAI,GAAG;MACX;MACAC,SAAS,EAAE,OAAO;MAClBC,QAAQ,EAAE,SAAS;MACnBK,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE;KACX;IAEL,IAAI,CAACtB,IAAI,CAACuB,GAAG,CAAC,wCAAwC,EAAET,IAAI,CAAC,CAACT,SAAS,CAACC,MAAM,IAAG;MACzE,IAAI,CAACF,OAAO,EAAE;IAClB,CAAC,EAAEQ,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAAC;EACrC;EAEFY,aAAa,CAACC,SAAiB;IAC7B,IAAI,CAACzB,IAAI,CAAC0B,MAAM,CAAC,uCAAuCD,SAAS,EAAE,CAAC,CAACpB,SAAS,CAC5EC,MAAM,IAAG;MACP,IAAI,CAACF,OAAO,EAAE;IAChB,CAAC,EACDQ,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAC9B;EACH;;AA9DWd,kBAAkB;mBAAlBA,kBAAkB,0CAKmB,UAAU;AAAA;AAL/CA,kBAAkB;SAAlBA,kBAAkB;EAAA6B,SAAlB7B,kBAAkB;AAAA","names":["Contact","ContactDataService","constructor","http","baseUrl","getContactsWithDetails","get","showAll","subscribe","result","contacts","length","push","console","log","error","addContact","body","firstName","lastName","categoryId","phoneId","post","updateContact","category_id","phone_id","put","deleteContact","contactId","delete","factory"],"sourceRoot":"","sources":["F:\\STEP\\My_Project\\Angular\\CoreMvcAngularExam\\CoreMVCAngularExam\\ClientApp\\src\\app\\contacts\\contactdata.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport class Contact {\r\n  contactId: number | undefined;\r\n  firstName: string | undefined;\r\n  lastName: string | undefined;\r\n  categoryId: number | undefined;\r\n  phoneId: number | undefined;\r\n}\r\n\r\n@Injectable()\r\nexport class ContactDataService {\r\n\r\n  public contacts: Contact[] = [];\r\n    baseUrl: string;\r\n\r\n    constructor(private http: HttpClient, @Inject('BASE_URL') baseUrl: string) {\r\n        this.http = http;\r\n        this.baseUrl = baseUrl;\r\n  }\r\n\r\n  getContactsWithDetails(): Observable<Contact[]> {\r\n    // Ваш запрос на сервер, который возвращает контакты с дополнительными данными\r\n    return this.http.get<Contact[]>(`https://localhost:7217/api/Contacts/contacts-with-details`);\r\n  }\r\n\r\n    showAll() {\r\n      this.http.get<Contact[]>(`https://localhost:7217/api/Contacts`).subscribe(result => {\r\n       // this.contacts = result;\r\n        this.contacts.length = 0;\r\n        this.contacts.push(...result as Contact[]);\r\n        console.log(result);\r\n      }, error => console.error(error));\r\n    }\r\n   \r\n  addContact() {\r\n\r\n    const body = {\r\n      //contact_id: 12,\r\n      firstName: \"Fedor\",\r\n      lastName: \"Fedorov\",\r\n      categoryId: 3,\r\n      phoneId: 17\r\n          \r\n    }\r\n\r\n    this.http.post(`https://localhost:7217/api/Contacts`, body).subscribe(result => {\r\n            this.showAll();\r\n        }, error => console.error(error));\r\n    }\r\n\r\n  updateContact() {\r\n\r\n        const body = {\r\n          //contact_id: 12,\r\n          firstName: \"Fedor\",\r\n          lastName: \"Fedorov\",\r\n          category_id: 3,\r\n          phone_id: 17\r\n        }\r\n\r\n    this.http.put(`https://localhost:7217/api/Contacts/12`, body).subscribe(result => {\r\n            this.showAll();\r\n        }, error => console.error(error));\r\n    }\r\n\r\n  deleteContact(contactId: number): void {\r\n    this.http.delete(`https://localhost:7217/api/Contacts/${contactId}`).subscribe(\r\n      result => {\r\n        this.showAll();\r\n      },\r\n      error => console.error(error)\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}