{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class Contact {}\nexport class ContactDataService {\n  constructor(http, baseUrl) {\n    this.http = http;\n    this.contacts = [];\n    this.apiUrl = 'https://localhost:7217/api/Contacts';\n    this.http = http;\n    this.baseUrl = baseUrl;\n  }\n  //getContactsWithDetails(): Observable<Contact[]> {\n  //  // Ваш запрос на сервер, который возвращает контакты с дополнительными данными\n  //  return this.http.get<Contact[]>(`https://localhost:7217/api/Contacts`);\n  //}\n  showAll() {\n    this.http.get(`https://localhost:7217/api/Contacts`).subscribe(result => {\n      // this.contacts = result;\n      this.contacts.length = 0;\n      this.contacts.push(...result);\n      console.log(result);\n    }, error => console.error(error));\n  }\n  addContact(contactData) {\n    return this.http.post(`https://localhost:7217/api/Contacts`, contactData);\n  }\n  /*\r\n    addContact(newContact: Contact) {\r\n      const body = {\r\n        firstName: newContact.firstName,\r\n        lastName: newContact.lastName,\r\n        categoryId: newContact.categoryId,\r\n        phoneId: newContact.phoneId\r\n      };\r\n      console.log(newContact);\r\n      this.http.post(`https://localhost:7217/api/Contacts`, body).subscribe(\r\n        result => {\r\n          this.showAll();\r\n        },\r\n        error => console.error('Error adding category:', error)\r\n      );\r\n    }\r\n    */\n  updateContact() {\n    const body = {\n      //contact_id: 12,\n      firstName: \"Fedor\",\n      lastName: \"Fedorov\",\n      category_id: 3,\n      phone_id: 17\n    };\n    this.http.put(`https://localhost:7217/api/Contacts/12`, body).subscribe(result => {\n      this.showAll();\n    }, error => console.error(error));\n  }\n  deleteContact(contactId) {\n    this.http.delete(`https://localhost:7217/api/Contacts/${contactId}`).subscribe(result => {\n      this.showAll();\n    }, error => console.error(error));\n  }\n}\nContactDataService.ɵfac = function ContactDataService_Factory(t) {\n  return new (t || ContactDataService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject('BASE_URL'));\n};\nContactDataService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ContactDataService,\n  factory: ContactDataService.ɵfac\n});","map":{"version":3,"mappings":";;AAIA,OAAM,MAAOA,OAAO;AASpB,OAAM,MAAOC,kBAAkB;EAM3BC,YAAoBC,IAAgB,EAAsBC,OAAe;IAArD,SAAI,GAAJD,IAAI;IAJnB,aAAQ,GAAc,EAAE;IAEvB,WAAM,GAAG,qCAAqC;IAGhD,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC5B;EAEA;EACA;EACA;EACA;EAEEC,OAAO;IACL,IAAI,CAACF,IAAI,CAACG,GAAG,CAAY,qCAAqC,CAAC,CAACC,SAAS,CAACC,MAAM,IAAG;MAClF;MACC,IAAI,CAACC,QAAQ,CAACC,MAAM,GAAG,CAAC;MACxB,IAAI,CAACD,QAAQ,CAACE,IAAI,CAAC,GAAGH,MAAmB,CAAC;MAC1CI,OAAO,CAACC,GAAG,CAACL,MAAM,CAAC;IACrB,CAAC,EAAEM,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAAC;EACrC;EAEAC,UAAU,CAACC,WAAgB;IACzB,OAAO,IAAI,CAACb,IAAI,CAACc,IAAI,CAAM,qCAAqC,EAAED,WAAW,CAAC;EAChF;EACF;;;;;;;;;;;;;;;;;EAiBEE,aAAa;IAEP,MAAMC,IAAI,GAAG;MACX;MACAC,SAAS,EAAE,OAAO;MAClBC,QAAQ,EAAE,SAAS;MACnBC,WAAW,EAAE,CAAC;MACdC,QAAQ,EAAE;KACX;IAEL,IAAI,CAACpB,IAAI,CAACqB,GAAG,CAAC,wCAAwC,EAAEL,IAAI,CAAC,CAACZ,SAAS,CAACC,MAAM,IAAG;MACzE,IAAI,CAACH,OAAO,EAAE;IAClB,CAAC,EAAES,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAAC;EACrC;EAEFW,aAAa,CAACC,SAAiB;IAC7B,IAAI,CAACvB,IAAI,CAACwB,MAAM,CAAC,uCAAuCD,SAAS,EAAE,CAAC,CAACnB,SAAS,CAC5EC,MAAM,IAAG;MACP,IAAI,CAACH,OAAO,EAAE;IAChB,CAAC,EACDS,KAAK,IAAIF,OAAO,CAACE,KAAK,CAACA,KAAK,CAAC,CAC9B;EACH;;AAnEWb,kBAAkB;mBAAlBA,kBAAkB,0CAMmB,UAAU;AAAA;AAN/CA,kBAAkB;SAAlBA,kBAAkB;EAAA2B,SAAlB3B,kBAAkB;AAAA","names":["Contact","ContactDataService","constructor","http","baseUrl","showAll","get","subscribe","result","contacts","length","push","console","log","error","addContact","contactData","post","updateContact","body","firstName","lastName","category_id","phone_id","put","deleteContact","contactId","delete","factory"],"sourceRoot":"","sources":["F:\\STEP\\My_Project\\Angular\\CoreMvcAngularExam\\CoreMVCAngularExam\\ClientApp\\src\\app\\contacts\\contactdata.service.ts"],"sourcesContent":["import { Injectable, Inject } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport class Contact {\r\n  contactId: number | undefined;\r\n  firstName: string | undefined;\r\n  lastName: string | undefined;\r\n  categoryId: number | undefined;\r\n  phoneId: number | undefined;\r\n}\r\n\r\n@Injectable()\r\nexport class ContactDataService {\r\n\r\n  public contacts: Contact[] = [];\r\n  baseUrl: string;\r\n  private apiUrl = 'https://localhost:7217/api/Contacts';\r\n\r\n    constructor(private http: HttpClient, @Inject('BASE_URL') baseUrl: string) {\r\n        this.http = http;\r\n        this.baseUrl = baseUrl;\r\n  }\r\n\r\n  //getContactsWithDetails(): Observable<Contact[]> {\r\n  //  // Ваш запрос на сервер, который возвращает контакты с дополнительными данными\r\n  //  return this.http.get<Contact[]>(`https://localhost:7217/api/Contacts`);\r\n  //}\r\n\r\n    showAll() {\r\n      this.http.get<Contact[]>(`https://localhost:7217/api/Contacts`).subscribe(result => {\r\n       // this.contacts = result;\r\n        this.contacts.length = 0;\r\n        this.contacts.push(...result as Contact[]);\r\n        console.log(result);\r\n      }, error => console.error(error));\r\n  }\r\n\r\n  addContact(contactData: any): Observable<any> {\r\n    return this.http.post<any>(`https://localhost:7217/api/Contacts`, contactData);\r\n  }\r\n/*\r\n  addContact(newContact: Contact) {\r\n    const body = {\r\n      firstName: newContact.firstName,\r\n      lastName: newContact.lastName,\r\n      categoryId: newContact.categoryId,\r\n      phoneId: newContact.phoneId\r\n    };\r\n    console.log(newContact);\r\n    this.http.post(`https://localhost:7217/api/Contacts`, body).subscribe(\r\n      result => {\r\n        this.showAll();\r\n      },\r\n      error => console.error('Error adding category:', error)\r\n    );\r\n  }\r\n  */\r\n  updateContact() {\r\n\r\n        const body = {\r\n          //contact_id: 12,\r\n          firstName: \"Fedor\",\r\n          lastName: \"Fedorov\",\r\n          category_id: 3,\r\n          phone_id: 17\r\n        }\r\n\r\n    this.http.put(`https://localhost:7217/api/Contacts/12`, body).subscribe(result => {\r\n            this.showAll();\r\n        }, error => console.error(error));\r\n    }\r\n\r\n  deleteContact(contactId: number): void {\r\n    this.http.delete(`https://localhost:7217/api/Contacts/${contactId}`).subscribe(\r\n      result => {\r\n        this.showAll();\r\n      },\r\n      error => console.error(error)\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}